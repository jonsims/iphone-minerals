<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The True Cost of Your iPhone</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- ====== HERO / MODEL SELECTOR ====== -->
    <section id="hero">
      <div class="hero-content">
        <h1>The True Cost of Your iPhone</h1>
        <p class="subtitle">
          Every iPhone carries a hidden footprint: minerals mined across 30+
          countries, ecosystems disrupted, and communities affected. Select your
          model to see what it really took to make.
        </p>
      </div>

      <div id="phone-selector">
        <div class="selector-label">Select your iPhone</div>
        <div id="phone-grid"></div>
      </div>

      <!-- Cumulative footprint calculator -->
      <div id="calculator-section" class="hidden">
        <h3>Calculate Your Total Footprint</h3>
        <p class="section-desc">
          Check off every iPhone you've owned — new or refurbished — to see
          your cumulative environmental impact.
        </p>
        <div id="calc-grid"></div>
        <div id="calc-summary" class="hidden">
          <div class="calc-stat">
            <div class="calc-stat-value" id="calc-co2">0</div>
            <div class="calc-stat-label">kg CO&#8322; total</div>
            <div class="calc-stat-equiv" id="calc-co2-equiv"></div>
          </div>
          <div class="calc-stat">
            <div class="calc-stat-value" id="calc-water">0</div>
            <div class="calc-stat-label">Liters of water</div>
            <div class="calc-stat-equiv" id="calc-water-equiv"></div>
          </div>
          <div class="calc-stat">
            <div class="calc-stat-value" id="calc-raw">$0</div>
            <div class="calc-stat-label">Raw material cost</div>
            <div class="calc-stat-equiv" id="calc-raw-equiv"></div>
          </div>
          <div class="calc-stat">
            <div class="calc-stat-value" id="calc-devices">0</div>
            <div class="calc-stat-label">Devices</div>
            <div class="calc-stat-equiv" id="calc-devices-equiv"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- ====== MAIN DETAIL VIEW (hidden until selection) ====== -->
    <main id="detail" class="hidden">
      <!-- Back button -->
      <button id="back-btn" aria-label="Back to model selector">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        All Models
      </button>

      <!-- Phone info header -->
      <header id="phone-header">
        <div class="phone-title">
          <h2 id="phone-name"></h2>
          <div class="phone-meta">
            <span id="phone-year" class="badge"></span>
            <span id="phone-frame" class="badge"></span>
            <span id="phone-chip" class="badge"></span>
            <span id="phone-weight" class="badge"></span>
          </div>
        </div>
      </header>

      <!-- ===== Evolution / What Changed ===== -->
      <section id="evolution-section" class="hidden">
        <h3>What Changed</h3>
        <div id="evolution-cards"></div>
      </section>

      <!-- ===== 1. THE TRUE COST — impact stats first ===== -->
      <section id="stats-row">
        <div class="stat-card stat-impact">
          <div class="stat-value" id="stat-co2">—</div>
          <div class="stat-label">kg CO&#8322; Lifecycle</div>
          <div class="stat-equiv" id="stat-co2-equiv"></div>
        </div>
        <div class="stat-card stat-impact">
          <div class="stat-value" id="stat-water">—</div>
          <div class="stat-label">Liters of Water</div>
          <div class="stat-equiv" id="stat-water-equiv"></div>
        </div>
        <div class="stat-card stat-impact">
          <div class="stat-value" id="stat-countries">—</div>
          <div class="stat-label">Source Countries</div>
          <div class="stat-equiv" id="stat-countries-equiv"></div>
        </div>
        <div class="stat-card stat-price">
          <div class="stat-value" id="stat-raw-cost">—</div>
          <div class="stat-label">Raw Material Cost</div>
          <div class="stat-equiv" id="stat-raw-equiv"></div>
        </div>
        <div class="stat-card stat-price">
          <div class="stat-value" id="stat-retail">—</div>
          <div class="stat-label">Retail Price</div>
          <div class="stat-equiv" id="stat-retail-equiv"></div>
        </div>
        <div class="stat-card stat-price">
          <div class="stat-value" id="stat-markup">—</div>
          <div class="stat-label">Price Multiplier</div>
          <div class="stat-equiv" id="stat-markup-equiv"></div>
        </div>
      </section>

      <!-- Price gap visual -->
      <section id="price-gap-section">
        <h3>Where Does the Money Go?</h3>
        <p class="section-desc">
          The raw materials in your phone are worth almost nothing compared to
          the retail price. The gap represents R&amp;D, manufacturing, software,
          marketing, logistics, and profit.
        </p>
        <div id="price-gap"></div>
      </section>

      <!-- ===== 2. ENVIRONMENTAL FOOTPRINT — which materials hurt most ===== -->
      <section id="eco-footprint-section">
        <h3>Environmental Footprint by Material</h3>
        <p class="section-desc">
          Not all materials are equal. Some carry enormous ecological costs even
          in tiny amounts. Gold, for instance, weighs just 0.034g in your phone
          but requires devastating mining processes.
        </p>
        <div id="eco-footprint">
          <div id="eco-co2-col">
            <h4>CO&#8322; Emissions <span class="h3-sub">(kg)</span></h4>
            <div id="eco-co2-bars"></div>
          </div>
          <div id="eco-water-col">
            <h4>Water Consumption <span class="h3-sub">(liters)</span></h4>
            <div id="eco-water-bars"></div>
          </div>
        </div>
      </section>

      <!-- ===== 3. GLOBAL SUPPLY CHAIN — interactive map ===== -->
      <section id="supply-chain-section">
        <h3>Global Supply Chain</h3>
        <p class="section-desc">
          Your iPhone's materials are sourced from mines, refineries, and
          factories spanning 6 continents before final assembly.
        </p>
        <div id="supply-map">
          <div id="map-tooltip" class="hidden"></div>
        </div>
      </section>

      <!-- ===== 4. MATERIAL COMPOSITION — context, not headline ===== -->
      <section id="composition-section">
        <div id="chart-container">
          <h3>What's Inside</h3>
          <div id="donut-wrap">
            <svg id="donut-chart" viewBox="0 0 200 200"></svg>
            <div id="donut-center">
              <span id="donut-center-value"></span>
              <span id="donut-center-label"></span>
            </div>
          </div>
          <div id="chart-legend"></div>
        </div>
        <div id="bars-container">
          <h3>By Weight <span class="h3-sub">(grams)</span></h3>
          <div id="material-bars"></div>
        </div>
      </section>

      <!-- ===== 5. MATERIAL DEEP DIVE ===== -->
      <section id="materials-section">
        <h3>Material Deep Dive</h3>
        <p class="section-desc">
          Click any material to explore its origins, mining costs, and the
          ecological damage it causes.
        </p>
        <div id="material-cards"></div>
      </section>

      <!-- ===== 6. INSIGHT CARDS ===== -->
      <section id="insights-section">
        <h3>Things to Think About</h3>
        <div id="insight-cards"></div>
      </section>

      <!-- ===== 7. COMPARE BUTTON ===== -->
      <section id="compare-cta">
        <button id="compare-btn">Compare All iPhone Models</button>
      </section>

      <!-- Data sources -->
      <footer id="sources">
        <h4>Data Sources &amp; Notes</h4>
        <p>
          Material compositions are estimates based on
          <a href="https://www.apple.com/environment/" target="_blank" rel="noopener">Apple Environmental Progress Reports</a>,
          <a href="https://www.ifixit.com" target="_blank" rel="noopener">iFixit teardowns</a>,
          <a href="https://www.usgs.gov/centers/national-minerals-information-center" target="_blank" rel="noopener">USGS Mineral Commodity Summaries</a>,
          and published lifecycle assessment studies. Commodity prices are
          approximate 2024 market averages. iPhone 17 data is estimated based
          on industry trends. Ecological data drawn from peer-reviewed LCA
          literature. Figures are approximate and intended for educational
          purposes. World map from
          <a href="https://github.com/flekschas/simple-world-map" target="_blank" rel="noopener">simple-world-map</a> (MIT License).
        </p>
      </footer>

      <p class="credit">Vibe-coded by Jonathan Sims, Babson College</p>
    </main>

    <!-- ====== COMPARE VIEW (hidden until triggered) ====== -->
    <section id="compare" class="hidden">
      <button id="compare-back-btn" aria-label="Back to detail view">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor"
            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        Back to <span id="compare-back-name"></span>
      </button>
      <h2 class="compare-title">Compare All iPhone Models</h2>
      <p class="section-desc compare-subtitle">
        See how your <strong id="compare-highlight-name"></strong> stacks up
        against every model from iPhone X to iPhone 17 Pro.
      </p>
      <div id="compare-charts"></div>
      <p class="credit">Vibe-coded by Jonathan Sims, Babson College</p>
    </section>

    <script type="module" src="app.js"></script>
  </body>
</html>
